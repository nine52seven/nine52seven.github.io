function getGlobalsDelta(){const e={};for(const t in gear)e[t]=gear[t].map(e=>({id:e.id,dps:e.dps,selected:e.selected,hidden:e.hidden}));const t={};for(const e in enchant)t[e]=enchant[e].map(e=>({id:e.id,dps:e.dps,selected:e.selected,hidden:e.hidden}));return{talents:talents.map(e=>({t:e.t.map(e=>e.c)})),buffs:buffs.filter(e=>e.active).map(e=>e.id),rotation:spells,gear:e,enchant:t}}function updateGlobals(e){for(let t in e.talents)for(let d in e.talents[t].t)talents[t].t[d].c=e.talents[t].t[d];for(let t of e.buffs)for(let e of buffs)t==e.id&&(e.active=!0);for(let t of e.rotation)for(let e of spells)if(t.id==e.id)for(let d in t)e[d]=t[d];for(let t in e.gear)for(let d of e.gear[t])if(gear[t])for(let e of gear[t])d.id==e.id&&(e.dps=d.dps,e.selected=d.selected,e.hidden=d.hidden);for(let t in e.enchant)for(let d of e.enchant[t])for(let e of enchant[t])d.id==e.id&&(e.dps=d.dps,e.selected=d.selected,e.hidden=d.hidden)}